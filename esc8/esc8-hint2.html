<!DOCTYPE html>
<!--

!!!! WARNING !!!!

以下にはこの謎の著しいネタバレが含まれます。

ソースコードを閲覧してのミッションクリアは不正行為となります。

絶対におやめください。

!!!! WARNING !!!!





!!!! WARNING !!!!

以下にはこの謎の著しいネタバレが含まれます。

ソースコードを閲覧してのミッションクリアは不正行為となります。

絶対におやめください。

!!!! WARNING !!!!








!!!! WARNING !!!!

以下にはこの謎の著しいネタバレが含まれます。

ソースコードを閲覧してのミッションクリアは不正行為となります。

絶対におやめください。

!!!! WARNING !!!!























-->
<html>
<head>
  <title>escape -8-</title>
  <meta charset="UTF-8">
</head>
<body>
    <svg viewBox="-150 -80 900 600">
        <rect x="-150" y="-80" width="900" height="600" fill="#CCFFCC"/>
        <script>
            var black = [1, 1];
            var red = [1, 4];
            var blue = 12;
            const algo = "SHA-256";
            const a = 'e7f6c011776e8db7cd330b54174fd76f7d0216b612387a5ffcfb81e6f0919683';
            const b = '19581e27de7ced00ff1ce50b2047e7a567c76b1cbaebabe5ef03f7c3017bb5b7';
            const c = 500;
            function hexString(buffer) {
                const byteArray = new Uint8Array(buffer);
                const hexCodes = [...byteArray].map(value => {
                    const hexCode = value.toString(16);
                    const paddedHexCode = hexCode.padStart(2, '0');
                    return paddedHexCode;
                    });
                return hexCodes.join('');
            }
            var arr = [570, 1123, 3158, 3151, 2144, 4163, 1128, 620, 4683, 1618, 4691, 2644, 3159, 2140, 3163, 4608, 27, 3058, 2619, 91, 3672, 4181, 4185, 2650, 2144, 4166, 1553, 2597, 535, 3644, 4672, 3156, 611, 50];
            function isWall(pos){
                if(pos[0]==black[0] && pos[1]==black[1]) return true;
                if(pos[0]==red[0] && pos[1]==red[1]) return true;
                if(pos[0]<1 || pos[0]>9 || pos[1]<1 || pos[1]>9) return true;
                if(pos[0]*pos[1]%10 == 8) return true;
                if(pos[0] == 9 && pos[1] == 9) return true;
                return false;
            }
            function reset_click() {
              btn = document.getElementById("reset_btn");
              btn.setAttribute("fill", "#555555");
              window.setTimeout(function(){btn.setAttribute("fill", "#DDDDDD");}, 200);
              black = [1, 1];
              red = [1, 4];
              blue = 12;
              document.getElementById("black_txt").textContent = black[0] * black[1];
              document.getElementById("red_txt").textContent = red[0] * red[1];
              document.getElementById("blue_txt").textContent = blue;
            }
            function btn_release(btn){
                btn.setAttribute("fill", "#DDDDDD");
            }
            function popup(){
                if (red[1]*blue+11==c/black[1]) alert("Congratulations!!\nPassword : ooO0|l1I")
            }
            async function click_btn(n){
                var btn = document.getElementById("btn_" + n);
                btn.setAttribute("fill", "#555555");
                window.setTimeout(function(){btn_release(btn)}, 200);
                if (blue <= 0) return;
                blue -= 1;
                document.getElementById("blue_txt").textContent = blue;
                var obj = black;
                if(n>3){
                    n -= 4;
                    obj = red;
                }
                const sumHashStr = 'e7f6c011776e8db7cd330b54174fd76f7d0216b612387a5ffcfb81e6f0919'+obj[1]+'83';
                const xorHashStr = '1'+obj[0]+'581e27de7ced00ff1ce50b2047e7a567c76b1cbaebabe5ef03f7c3017bb5b7';
                switch(n){
                    case 0:
                    var pos = [obj[0], obj[1]-1];
                    while(true)
                    {
                        if(isWall(pos)) break;
                        obj[1] -= 1;
                        pos[1] -= 1;
                    }
                    break;
                    case 1:
                    var pos = [obj[0], obj[1]+1];
                    while(true)
                    {
                        if(isWall(pos)) break;
                        obj[1] += 1;
                        pos[1] += 1;
                    }
                    break;
                    case 2:
                    var pos = [obj[0]-1, obj[1]];
                    while(true)
                    {
                        if(isWall(pos)) break;
                        obj[0] -= 1;
                        pos[0] -= 1;
                    }
                    break;
                    case 3:
                    var pos = [obj[0]+1, obj[1]];
                    while(true)
                    {
                        if(obj == red && sumHashStr == a && xorHashStr == b)
                        {
                            window.setTimeout(function(){alert(arr.map(e=>String.fromCharCode((e+red[1])%(red[0]+c))).join(''));}, 200);
                            break;
                        }
                        if(isWall(pos)) break;
                        obj[0] += 1;
                        pos[0] += 1;
                    }
                    break;
                }
                if(obj == black) document.getElementById("black_txt").textContent = black[0] * black[1];
                else document.getElementById("red_txt").textContent = red[0] * red[1];
            }
        </script>
        <text x="300" y="0" text-anchor="middle" font-size="60" fill="black"
        cursor="default" style="user-select:none; -webkit-user-select:none;
        -moz-user-select:none; -ms-user-select:none;">ESCAPE -8-</text>
        <rect x="210" y="30" width="180" height="180" stroke="black" fill="#DDDDDD"/>
        <line x1="300" y1="50" x2="300" y2="210" stroke="#777777" stroke-width="180" stroke-dasharray="1 19"></line>
        <line x1="230" y1="120" x2="390" y2="120" stroke="#777777" stroke-width="180" stroke-dasharray="1 19"></line>
    
        <rect x="270" y="50" width="60" height="60" stroke="black" fill="#FFFFFF"/>
        <rect x="270" y="130" width="60" height="60" stroke="black" fill="#FFFFFF"/>

        <line x1="300" y1="70" x2="300" y2="110" stroke="#CCCCCC" stroke-width="59" stroke-dasharray="1 19"></line>
        <line x1="290" y1="80" x2="330" y2="80" stroke="#CCCCCC" stroke-width="59" stroke-dasharray="1 19"></line>
        <line x1="300" y1="150" x2="300" y2="190" stroke="#CCCCCC" stroke-width="59" stroke-dasharray="1 19"></line>
        <line x1="290" y1="160" x2="330" y2="160" stroke="#CCCCCC" stroke-width="59" stroke-dasharray="1 19"></line>

        <line x1="160" y1="100" x2="200" y2="100" stroke-width="2" stroke="red"/>
        <line x1="190" y1="95" x2="200" y2="100" stroke-width="2" stroke="red"/>
        <line x1="190" y1="105" x2="200" y2="100" stroke-width="2" stroke="red"/>
        <line x1="398" y1="140" x2="438" y2="140" stroke-width="2" stroke="red"/>
        <line x1="428" y1="135" x2="438" y2="140" stroke-width="2" stroke="red"/>
        <line x1="428" y1="145" x2="438" y2="140" stroke-width="2" stroke="red"/>
        <text x="300" y="90" text-anchor="middle" font-size="30" fill="black" id="black_txt"
            cursor="default" style="user-select:none; -webkit-user-select:none;
            -moz-user-select:none; -ms-user-select:none;">1</text>
        <text x="300" y="170" text-anchor="middle" font-size="30" fill="red" id="red_txt"
            cursor="default" style="user-select:none; -webkit-user-select:none;
            -moz-user-select:none; -ms-user-select:none;">4</text>

        <text x="220" y="46" text-anchor="middle" font-size="15" fill="#777777"
            cursor="default" style="user-select:none; -webkit-user-select:none;
            -moz-user-select:none; -ms-user-select:none;">1</text>
        <text x="220" y="106" text-anchor="middle" font-size="15" fill="#777777"
            cursor="default" style="user-select:none; -webkit-user-select:none;
            -moz-user-select:none; -ms-user-select:none;">4</text>

        <defs><symbol id="arrow">
            <polygon points="14,0 0,14 7,14 7,28 21,28 21,14 28,14"></polygon>
        </symbol></defs>
        <circle cx="210" cy="255" r="25" stroke="black" fill="#DDDDDD" onmousedown="click_btn(0)" id="btn_0"/>
        <use x="196" y="241" onmousedown="click_btn(0)" xlink:href="#arrow"></use>
        <circle cx="270" cy="255" r="25" stroke="black" fill="#DDDDDD" onmousedown="click_btn(1)" id="btn_1"/>
        <use x="-284" y="-270" transform="rotate(180)" onmousedown="click_btn(1)" xlink:href="#arrow"></use>
        <circle cx="330" cy="255" r="25" stroke="black" fill="#DDDDDD" onmousedown="click_btn(2)" id="btn_2"/>
        <use x="-269" y="314" transform="rotate(-90)" onmousedown="click_btn(2)" xlink:href="#arrow"></use>
        <circle cx="390" cy="255" r="25" stroke="black" fill="#DDDDDD" onmousedown="click_btn(3)" id="btn_3"/>
        <use x="241" y="-404" transform="rotate(90)" onmousedown="click_btn(3)" xlink:href="#arrow"></use>
        <circle cx="210" cy="315" r="25" stroke="black" fill="#DDDDDD" onmousedown="click_btn(4)" id="btn_4"/>
        <use x="196" y="301" onmousedown="click_btn(4)" xlink:href="#arrow" fill="red"></use>
        <circle cx="270" cy="315" r="25" stroke="black" fill="#DDDDDD" onmousedown="click_btn(5)" id="btn_5"/>
        <use x="-284" y="-330" transform="rotate(180)" onmousedown="click_btn(5)" xlink:href="#arrow" fill="red"></use>
        <circle cx="330" cy="315" r="25" stroke="black" fill="#DDDDDD" onmousedown="click_btn(6)" id="btn_6"/>
        <use x="-329" y="314" transform="rotate(-90)" onmousedown="click_btn(6)" xlink:href="#arrow" fill="red"></use>
        <circle cx="390" cy="315" r="25" stroke="black" fill="#DDDDDD" onmousedown="click_btn(7)" id="btn_7"/>
        <use x="301" y="-404" transform="rotate(90)" onmousedown="click_btn(7)" xlink:href="#arrow" fill="red"></use>
        
        <rect x="100" y="255" width="60" height="60" stroke="black" fill="#FFFFFF"/>
        <text x="130" y="295" text-anchor="middle" font-size="30" fill="blue" id="blue_txt"
            cursor="default" style="user-select:none; -webkit-user-select:none;
            -moz-user-select:none; -ms-user-select:none;">12</text>
        
        <rect x="440" y="260" width="80" height="50" fill="#DDDDDD" onclick="reset_click()" stroke="black"
            id="reset_btn">
        </rect>
        <text x="480" y="293" text-anchor="middle" font-size="20" fill="black" onclick="reset_click()"
            cursor="default" style="user-select:none; -webkit-user-select:none;
            -moz-user-select:none; -ms-user-select:none;">
            RESET
        </text>
    </svg>
</body>
</html>